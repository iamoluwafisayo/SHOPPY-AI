# embed data that look like this in file amazon_shoes.json and store in chromaDB
# {"url": "https://www.amazon.co.uk/dp/B07XG93CF5", "title": "adidas Originals Men's Superstar Shoes Sneaker", "asin": "B07XG93CF5", "price": "\u00a379.99 - \u00a3168.28", "brand": "adidas Originals", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n40.79 x 29.39 x 13.41 cm; 289.17 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n5 Sept. 2019\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nadidas Originals\n\n\nASIN\n\u200f\n:\n\u200e\n\nB07XG93CF5\n\n\nItem model number\n\u200f\n:\n\u200e\n\nFV8270\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/41XWznXi3wL.jpg", "https://m.media-amazon.com/images/I/41hAVskukQL.jpg", "https://m.media-amazon.com/images/I/41yPIBumDjL.jpg", "https://m.media-amazon.com/images/I/31qvWfdLI0L.jpg", "https://m.media-amazon.com/images/I/31gSOSafkWL.jpg", "https://m.media-amazon.com/images/I/31W2qSoEJnL.jpg", "https://m.media-amazon.com/images/I/41aNhRuiCkL.jpg"], "features": [{"Outer Material": "Synthetic"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Height": "6 inches"}, {"Material Composition": "100% Leather"}, {"Shoe Width": "Medium"}]},
# {"url": "https://www.amazon.co.uk/dp/B098G4DW59", "title": "adidas Men's Swift Run X Gymnastics Shoe", "asin": "B098G4DW59", "price": "\u00a3104.45", "brand": "Visit the adidas Store", "product_details": "Date First Available\n\u200f\n:\n\u200e\n\n4 Dec. 2020\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nAdidas\n\n\nASIN\n\u200f\n:\n\u200e\n\nB08PQPH6BM\n\n\nItem model number\n\u200f\n:\n\u200e\n\nFY2116\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Fashion & Athletic Trainers/Sports & Outdoor Shoes", "images_list": ["https://m.media-amazon.com/images/I/31cLUu4nJ5L.jpg", "https://m.media-amazon.com/images/I/316bpjU+wnL.jpg", "https://m.media-amazon.com/images/I/31FAFSIK9gL.jpg", "https://m.media-amazon.com/images/I/31D8-4JgXcL.jpg"], "features": [{"Outer Material": "Synthetic"}, {"Inner Material": "Canvas"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Type": "No Heel"}, {"Shoe Width": "Medium"}]},
# {"url": "https://www.amazon.co.uk/dp/B008LV3VEM", "title": "ASICS Women's Athletic Sneakers", "asin": "B008LV3VEM", "price": "\u00a392.10 - \u00a3117.90", "brand": "ASICS", "product_details": "Product Dimensions\n\u200f\n:\n\u200e\n\n29.21 x 11.43 x 19.05 cm; 907.18 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n13 Oct. 2016\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nAsics\n\n\nASIN\n\u200f\n:\n\u200e\n\nB008LV2F1M\n\n\nManufacturer reference\n\u200f\n:\n\u200e\n\nT2G8N9001\n\n\nDepartment\n\u200f\n:\n\u200e\n\nWomen's", "breadcrumbs": "Shoes/Women's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/41El+eFQo2L.jpg", "https://m.media-amazon.com/images/I/31EqNpHBX9L.jpg", "https://m.media-amazon.com/images/I/41kNCR2GVyL.jpg", "https://m.media-amazon.com/images/I/41OyhwjfF2L.jpg", "https://m.media-amazon.com/images/I/41DngnfKvNL.jpg"], "features": [{"Color": "Black/White/Lightning"}, {"Outer Material": "Synthetic"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Height": "3 inches"}, {"Shoe Width": "Regular"}, {"Material": "Synthetic"}, {"Measurements": "1.25\" heel"}, {"Width": "M"}]},
# {"url": "https://www.amazon.co.uk/dp/B0849CPDYC", "title": "TOM TAILOR Women's 9092403 Sneaker", "asin": "B0849CPDYC", "price": "\u00a338.21 - \u00a359.04", "brand": "TOM TAILOR", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n31.6 x 22.6 x 11 cm; 650 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n30 Jan. 2020\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nTom Tailor\n\n\nASIN\n\u200f\n:\n\u200e\n\nB0849CPDYC\n\n\nItem model number\n\u200f\n:\n\u200e\n\n9092403\n\n\nDepartment\n\u200f\n:\n\u200e\n\nWomen's", "breadcrumbs": "Shoes/Women's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/41ph2LnQ3nL.jpg", "https://m.media-amazon.com/images/I/41zGf--YggL.jpg", "https://m.media-amazon.com/images/I/41ZtzIboiFL.jpg", "https://m.media-amazon.com/images/I/21m-MTISOJL.jpg", "https://m.media-amazon.com/images/I/41E3WTsP7ZL.jpg", "https://m.media-amazon.com/images/I/41-1thE1FgL.jpg", "https://m.media-amazon.com/images/I/41s+CzWtO7L.jpg"], "features": [{"Outer Material": "Synthetic"}, {"Inner Material": "Textile"}, {"Sole": "Ethylene Vinyl Acetate"}, {"Closure": "Schnellschn\u00fcrung"}, {"Heel Type": "Low"}, {"Shoe Width": "Medium"}]},
# {"url": "https://www.amazon.co.uk/dp/B07LG2D9GM", "title": "Geox Men's U Brenson a Classic Boots", "asin": "B07LG2D9GM", "price": "\u00a3116.61 - \u00a3135.52", "brand": "Visit the Geox Store", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n36.2 x 29.2 x 13.2 cm; 1.44 Kilograms\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n11 Sept. 2019\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nGeox\n\n\nASIN\n\u200f\n:\n\u200e\n\nB07LFV952Y\n\n\nItem model number\n\u200f\n:\n\u200e\n\nU948AA04622\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Boots", "images_list": ["https://m.media-amazon.com/images/I/410dmekDFZL.jpg", "https://m.media-amazon.com/images/I/31t3DryoBpL.jpg", "https://m.media-amazon.com/images/I/31AKuhEQTzL.jpg", "https://m.media-amazon.com/images/I/31DK2xFpsRL.jpg", "https://m.media-amazon.com/images/I/31yT6yg-nyL.jpg", "https://m.media-amazon.com/images/I/31VZXAShA8L.jpg", "https://m.media-amazon.com/images/I/41gI1DplaoL.jpg"], "features": [{"Outer Material": "Leather"}, {"Inner Material": "Leather"}, {"Sole": "Synthetic"}, {"Closure": "Lace-Up"}, {"Heel Type": "Block"}, {"Fit Type": "Bear in mind that Geox shoes have a comfortable fit, therefore we recommend choosing half a size smaller than your usual size"}, {"Shoe Width": "Medium"}]},
# {"url": "https://www.amazon.co.uk/dp/B08KWFR1LB", "title": "HUGO Men's Kyrown_desb_sd Chukka Boot", "asin": "B08KWFR1LB", "price": "\u00a381.64 - \u00a3189.00", "brand": "Visit the HUGO Store", "product_details": "Product Dimensions\n\u200f\n:\n\u200e\n\n30 x 20 x 10 cm; 1 Kilograms\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n15 Oct. 2020\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nHUGO\n\n\nASIN\n\u200f\n:\n\u200e\n\nB08KWF767R\n\n\nItem model number\n\u200f\n:\n\u200e\n\n50455215\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Boots", "images_list": ["https://m.media-amazon.com/images/I/31HFSrVx3NS.jpg", "https://m.media-amazon.com/images/I/31M6pcd4DqS.jpg", "https://m.media-amazon.com/images/I/31uS9MAWv-S.jpg", "https://m.media-amazon.com/images/I/21EXoS5MEuS.jpg", "https://m.media-amazon.com/images/I/21EgJ21SdeS.jpg", "https://m.media-amazon.com/images/I/21Jcho46TfS.jpg", "https://m.media-amazon.com/images/I/313TOw-XtTS.jpg"], "features": [{"Outer Material": "Leather"}, {"Inner Material": "Leather"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Shoe Width": "Medium"}, {"Sole": "Other material"}, {"Packaging": "Box"}]},
# {"url": "https://www.amazon.co.uk/dp/B01J8LRDRY", "title": "Superga 2754 Lamew, Unisex Adult Low-Top Trainers", "asin": "B01J8LRDRY", "price": "\u00a319.51 - \u00a370.72", "brand": "Visit the Superga Store", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n29.4 x 17.6 x 10 cm; 899.99 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n20 July 2016\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nSuperga\n\n\nASIN\n\u200f\n:\n\u200e\n\nB00HVRH3QY\n\n\nItem model number\n\u200f\n:\n\u200e\n\nS007LM0\n\n\nDepartment\n\u200f\n:\n\u200e\n\nGirl's", "breadcrumbs": "Shoes/Women's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/41--9FtPIsL.jpg", "https://m.media-amazon.com/images/I/510F8NSc-nL.jpg", "https://m.media-amazon.com/images/I/51ssTU4QgSL.jpg", "https://m.media-amazon.com/images/I/31xrM67LZFL.jpg", "https://m.media-amazon.com/images/I/41TH5tNK5CL.jpg", "https://m.media-amazon.com/images/I/41+SbJ0YKGL.jpg", "https://m.media-amazon.com/images/I/51xoxHZBIIL.jpg"], "features": [{"Outer Material": "Silk"}, {"Inner Material": "Unlined"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Type": "Flat"}, {"Shoe Width": "Medium"}]},
# {"url": "https://www.amazon.co.uk/dp/B08Q84YBZH", "title": "Slow Man womens Comfortable", "asin": "B08Q84YBZH", "price": "\u00a338.93 - \u00a382.34", "brand": "Slow Man", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n30.3 x 21.31 x 11 cm; 400 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n8 July 2020\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nSlow Man\n\n\nASIN\n\u200f\n:\n\u200e\n\nB085SXCLXJ\n\n\nManufacturer reference\n\u200f\n:\n\u200e\n\n1839\n\n\nDepartment\n\u200f\n:\n\u200e\n\nWomen's", "breadcrumbs": "Shoes/Women's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/51HpJwtwRIL.jpg", "https://m.media-amazon.com/images/I/51M21FtVAgL.jpg", "https://m.media-amazon.com/images/I/41rrJpEoFgL.jpg", "https://m.media-amazon.com/images/I/4107kT-1yWL.jpg", "https://m.media-amazon.com/images/I/41XwANT8lVL.jpg", "https://m.media-amazon.com/images/I/31-op8N876L.jpg"], "features": [{"Outer Material": "Mesh"}, {"Sole": "MD + Air Cushion"}, {"Closure": "Pull On"}, {"Heel Height": "1.96 inches"}, {"Heel Type": "mid-heel"}, {"Shoe Width": "Medium"}]},
# {"url": "https://www.amazon.co.uk/dp/B08PH87R7S", "title": "British Knights Men's Master Lo Sneaker", "asin": "B08PH87R7S", "price": "\u00a324.79 - \u00a357.80", "brand": "British Knights", "product_details": "Batteries\n\u200f\n:\n\u200e\n\n1 AAA batteries required.\n\n\nPackage Dimensions\n\u200f\n:\n\u200e\n\n33 x 22 x 11.5 cm; 1 Kilograms\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n2 Dec. 2020\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nBritish Knights\n\n\nASIN\n\u200f\n:\n\u200e\n\nB08PPTT2YV\n\n\nItem model number\n\u200f\n:\n\u200e\n\nB47-3717\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/41jqblSzuZL.jpg", "https://m.media-amazon.com/images/I/41WowAd+jjL.jpg", "https://m.media-amazon.com/images/I/41iZ4QzIvdL.jpg", "https://m.media-amazon.com/images/I/315nNtFlK9L.jpg", "https://m.media-amazon.com/images/I/31hPGMOpWZL.jpg", "https://m.media-amazon.com/images/I/311gsPY9EVL.jpg", "https://m.media-amazon.com/images/I/41xn0p2v5DL.jpg"], "features": [{"Insole material": "cotton"}, {"Outer sole material": "rubber"}, {"Outer Material": "Canvas"}, {"Inner Material": "Manmade"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Type": "Flat"}, {"Shoe Width": "Medium"}, {"Lining material": "cotton"}, {"Upper material": "cotton"}]},
# {"url": "https://www.amazon.co.uk/dp/B076RWYGKP", "title": "Under Armour Men's HOVR Havoc Low Basketball Shoes, Men's Men's Basketball Shoes", "asin": "B076RWYGKP", "price": "\u00a342.87 - \u00a3227.30", "brand": "Visit the Under Armour Store", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n32.41 x 21.59 x 12.19 cm; 396.89 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n20 Sept. 2018\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nUnder Armour\n\n\nASIN\n\u200f\n:\n\u200e\n\nB076RYFFBT\n\n\nItem model number\n\u200f\n:\n\u200e\n\n3020618\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Fashion & Athletic Trainers/Sports & Outdoor Shoes/Basketball Shoes", "images_list": ["https://m.media-amazon.com/images/I/4170ORNOYKL.jpg", "https://m.media-amazon.com/images/I/41+DI3iPPRL.jpg", "https://m.media-amazon.com/images/I/41fJQ2pH2qL.jpg", "https://m.media-amazon.com/images/I/31ZKYHhyJ1L.jpg", "https://m.media-amazon.com/images/I/417FCIOOoJL.jpg", "https://m.media-amazon.com/images/I/41LsLiwFw8L.jpg", "https://m.media-amazon.com/images/I/411+fTrxdOL.jpg"], "features": [{"Outer Material": "Synthetic"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Material Composition": "100% Synthetic"}, {"Shoe Width": "Schmal"}]},
# {"url": "https://www.amazon.co.uk/dp/B07SZ79Q2S", "title": "Reebok Women's Classic Leather Sneaker, Black/neon red/Black", "asin": "B07SZ79Q2S", "price": "\u00a354.83 - \u00a3158.83", "brand": "Visit the Reebok Store", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n25.9 x 18.28 x 9.39 cm; 612 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n13 Jun. 2019\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nReebok\n\n\nASIN\n\u200f\n:\n\u200e\n\nB07SZ771ZM\n\n\nItem model number\n\u200f\n:\n\u200e\n\nHJ526\n\n\nDepartment\n\u200f\n:\n\u200e\n\nWomen's", "breadcrumbs": "Shoes/Women's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/31wfSlsmC+L.jpg", "https://m.media-amazon.com/images/I/41c6a7YjeAL.jpg", "https://m.media-amazon.com/images/I/31WAcWPELxL.jpg", "https://m.media-amazon.com/images/I/312ry+LEKKL.jpg", "https://m.media-amazon.com/images/I/31OOSGicfNL.jpg", "https://m.media-amazon.com/images/I/31tGBJWzi8L.jpg", "https://m.media-amazon.com/images/I/41RuGnad6TL.jpg"], "features": [{"Outer Material": "Leather"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Type": "low-heel"}, {"Shoe Width": "M"}]},
# {"url": "https://www.amazon.co.uk/dp/B07Z5R6BML", "title": "ECCO Men's Soft 7 Wallaby Sneaker", "asin": "B07Z5R6BML", "price": "\u00a359.79 - \u00a3304.93", "brand": "Visit the ECCO Store", "product_details": "Package Dimensions\n\u200f\n:\n\u200e\n\n35.56 x 19.05 x 12.44 cm; 413.9 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n19 July 2019\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nEcco\n\n\nASIN\n\u200f\n:\n\u200e\n\nB07V9PH3LM\n\n\nItem model number\n\u200f\n:\n\u200e\n\n47005451952\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "Shoes/Men's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/314wBUmde-L.jpg", "https://m.media-amazon.com/images/I/31uEgg9nHjL.jpg", "https://m.media-amazon.com/images/I/31vDRgo4PhL.jpg", "https://m.media-amazon.com/images/I/31bWUnzMZ5L.jpg", "https://m.media-amazon.com/images/I/31cZHGlWN8L.jpg", "https://m.media-amazon.com/images/I/3120VP1YisL.jpg", "https://m.media-amazon.com/images/I/31uPTp6hAUL.jpg"], "features": [{"Outer Material": "Leather"}, {"Inner Material": "Textile"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Material Composition": "Real leather and textile"}, {"Shoe Width": "Schmal"}]},
# {"url": "https://www.amazon.co.uk/dp/B08QVH5BFD", "title": "Rocket Dog Women's Waltsc-245 Sneaker", "asin": "B08QVH5BFD", "price": "\u00a335.57 - \u00a342.59", "brand": "Visit the Rocket Dog Store", "product_details": "Product Dimensions\n\u200f\n:\n\u200e\n\n30.23 x 18.29 x 10.41 cm; 345.86 Grams\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n31 Dec. 2020\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nRocket Dog\n\n\nASIN\n\u200f\n:\n\u200e\n\nB08QTM1ZYD\n\n\nItem model number\n\u200f\n:\n\u200e\n\nWALTSC\n\n\nDepartment\n\u200f\n:\n\u200e\n\nWomen's", "breadcrumbs": "Shoes/Women's Shoes/Fashion & Athletic Trainers/Fashion Trainers", "images_list": ["https://m.media-amazon.com/images/I/417RL4pjGvL.jpg", "https://m.media-amazon.com/images/I/41UWhsSQUXL.jpg", "https://m.media-amazon.com/images/I/41myKe3F6RL.jpg", "https://m.media-amazon.com/images/I/31reHJn4fLL.jpg", "https://m.media-amazon.com/images/I/31h+7KwVyYL.jpg", "https://m.media-amazon.com/images/I/417McdPeU5L.jpg", "https://m.media-amazon.com/images/I/41dWVsjVOML.jpg"], "features": [{"Outer Material": "Cotton"}, {"Sole": "100% Synthetic"}, {"Closure": "Lace-Up"}, {"Heel Type": "No Heel"}, {"Shoe Width": "Medium"}]},


# {"url": "https://www.amazon.co.uk/dp/B07RWMW8M6", "title": "adidas Men's Bd7611 Track Shoe", "asin": "B07RWMW8M6", "price": "\u00a364.99 - \u00a3124.00", "brand": "Visit the adidas Store", "product_details": "Is Discontinued By Manufacturer\n\u200f\n:\n\u200e\n\nNo\n\n\nPackage Dimensions\n\u200f\n:\n\u200e\n\n30 x 30 x 10 cm; 1.5 Kilograms\n\n\nDate First Available\n\u200f\n:\n\u200e\n\n15 May 2019\n\n\nManufacturer\n\u200f\n:\n\u200e\n\nadidas\n\n\nASIN\n\u200f\n:\n\u200e\n\nB07RVCGGHC\n\n\nItem model number\n\u200f\n:\n\u200e\n\nEE5711\n\n\nDepartment\n\u200f\n:\n\u200e\n\nMen's", "breadcrumbs": "", "images_list": ["https://m.media-amazon.com/images/I/41TJkbth7pL.jpg", "https://m.media-amazon.com/images/I/416OSKDJwML.jpg", "https://m.media-amazon.com/images/I/31uvtYgkbEL.jpg"], "features": [{"Outer Material": "Patent Leather"}, {"Sole": "Rubber"}, {"Closure": "Lace-Up"}, {"Heel Height": "3 centimetres"}, {"Heel Type": "Flat"}, {"Shoe Width": "Medium"}]},


# or 

# {
#         "url": "https://www.carvana.com/vehicle/2004275",
#         "vehicle_id": 2004275,
#         "maker": "Honda",
#         "model": "Civic",
#         "price": 15590,
#         "year": 2013,
#         "body_style": "Sedan",
#         "body_type": "Sedan",
#         "sale_status": "Available",
#         "mileage": 70056,
#         "trim": "LX Sedan 4D",
#         "location": {
#             "addressLine1": "63 Pierce Rd",
#             "city": "Winder",
#             "stateAbbreviation": "GA",
#             "zip5": "30680"
#         },
#         "details": {
#             "basics": {
#                 "mpgCity": 28,
#                 "mpgHighway": 39,
#                 "engineCylinderCount": 4,
#                 "engineDescription": "4-Cyl, i-VTEC, 1.8 Liter",
#                 "engineHorsepower": 140,
#                 "engineTorque": 128,
#                 "fuelDescription": "Gas",
#                 "driveTrainDescription": "FWD",
#                 "exteriorColor": "Burgundy",
#                 "interiorColor": "BEIGE",
#                 "exteriorRGB": { "red": 128, "green": 0, "blue": 0 },
#                 "interiorRGB": { "red": 245, "green": 245, "blue": 220 },
#                 "transmission": "Automatic, 5-Spd",
#                 "numberOfKeys": 1,
#                 "doors": 4,
#                 "seating": "5",
#                 "vin": "19XFB2F55DE077575",
#                 "stockNumber": 2001202860,
#                 "poseData": {
#                     "installedPackages": [],
#                     "installedOptions": [],
#                     "installedOptionsData": [],
#                     "standardEquipment": []
#                 },
#                 "curbWeight": 2815,
#                 "msrp": 19755,
#                 "kbbVehicleID": 383086,
#                 "wheelSize": 15,
#                 "engineDisplacement": 0
#             },
#             "facets": [
#                 { "facetId": 5, "facetName": "Rear View Camera" },
#                 { "facetId": 10, "facetName": "Hands Free Calling" },
#                 { "facetId": 25, "facetName": "Alloy Wheels" }
#             ],
#             "KBBData": [
#                 {
#                     "label": "Braking and Traction",
#                     "feature": [
#                         {
#                             "label": "Braking and Traction",
#                             "displayName": "Traction Control",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213519
#                         },
#                         {
#                             "label": "Braking and Traction",
#                             "displayName": "Stability Control",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213524
#                         },
#                         {
#                             "label": "Braking and Traction",
#                             "displayName": "ABS (4-Wheel)",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213525
#                         }
#                     ]
#                 },
#                 {
#                     "label": "Comfort and Convenience",
#                     "feature": [
#                         {
#                             "label": "Comfort and Convenience",
#                             "displayName": "Keyless Entry",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213528
#                         },
#                         {
#                             "label": "Comfort and Convenience",
#                             "displayName": "Air Conditioning",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213532
#                         },
#                         {
#                             "label": "Comfort and Convenience",
#                             "displayName": "Power Windows",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213535
#                         },
#                         {
#                             "label": "Comfort and Convenience",
#                             "displayName": "Power Door Locks",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213538
#                         },
#                         {
#                             "label": "Comfort and Convenience",
#                             "displayName": "Cruise Control",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213542
#                         },
#                         {
#                             "label": "Comfort and Convenience",
#                             "displayName": "Alarm System",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 7369646
#                         }
#                     ]
#                 },
#                 {
#                     "label": "Steering",
#                     "feature": [
#                         {
#                             "label": "Steering",
#                             "displayName": "Tilt & Telescoping Wheel",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213546
#                         },
#                         {
#                             "label": "Steering",
#                             "displayName": "Power Steering",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213608
#                         }
#                     ]
#                 },
#                 {
#                     "label": "Entertainment and Instrumentation",
#                     "feature": [
#                         {
#                             "label": "Entertainment and Instrumentation",
#                             "displayName": "AM/FM Stereo",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213548
#                         },
#                         {
#                             "label": "Entertainment and Instrumentation",
#                             "displayName": "CD/MP3 (Single Disc)",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213550
#                         },
#                         {
#                             "label": "Entertainment and Instrumentation",
#                             "displayName": "Bluetooth Wireless",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213552
#                         }
#                     ]
#                 },
#                 {
#                     "label": "Safety and Security",
#                     "feature": [
#                         {
#                             "label": "Safety and Security",
#                             "displayName": "Backup Camera",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213556
#                         },
#                         {
#                             "label": "Safety and Security",
#                             "displayName": "Dual Air Bags",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213560
#                         },
#                         {
#                             "label": "Safety and Security",
#                             "displayName": "Side Air Bags",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213563
#                         },
#                         {
#                             "label": "Safety and Security",
#                             "displayName": "F&R Head Curtain Air Bags",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213566
#                         }
#                     ]
#                 },
#                 {
#                     "label": "Lighting",
#                     "feature": [
#                         {
#                             "label": "Lighting",
#                             "displayName": "Daytime Running Lights",
#                             "isValuable": false,
#                             "isRare": false,
#                             "kbbOptionId": 5213569
#                         }
#                     ]
#                 },
#                 {
#                     "label": "Wheels and Tires",
#                     "feature": [
#                         {
#                             "label": "Wheels and Tires",
#                             "displayName": "Steel Wheels",
#                             "isValuable": false,
#                             "isRare": true,
#                             "kbbOptionId": 5213572
#                         }
#                     ]
#                 }
#             ],
#             "warranty": {
#                 "manufacturerBasicWarrantyMonths": 36,
#                 "manufacturerBasicWarrantyMiles": 36000,
#                 "manufacturerDriveTrainWarrantyMonths": 60,
#                 "manufacturerDriveTrainWarrantyMiles": 60000,
#                 "inServiceDate": "2013-10-25T00:00:00Z",
#                 "remainingWarrantyMonths": 0,
#                 "remainingWarrantyMiles": 0,
#                 "remainingDriveTrainWarrantyMonths": 0,
#                 "remainingDriveTrainWarrantyMiles": 0,
#                 "inServiceMiles": 24
#             }
#         },
#         "highlights": [
#             {
#                 "tagId": 21,
#                 "tagCategoryId": 1,
#                 "tagKey": "AccidentFree",
#                 "tagName": "Accident Free",
#                 "tagDescription": "Like every Carvana vehicle, this vehicle has never been in a reported accident.",
#                 "sortOrder": 10,
#                 "isResultTileDisplayable": false,
#                 "isVdpDisplayable": true
#             }
#         ],
#         "images": [
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392882.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392883.jpg?v=1633540202.618",
#             null,
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392885.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392886.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392887.jpg?v=1633540202.618",
#             null,
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392889.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392890.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392891.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392892.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392893.jpg?v=1633540202.618",
#             null,
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392895.jpg?v=1633540202.618",
#             "https://vexgateway.fastly.carvana.io/vex-613277/details/feature-10392896.jpg?v=1633540202.618"
#         ],
#         "scraped_at": "2021-10-09 13:38:41"
#     },



import json
import os
import chromadb
import openai
from chromadb.utils.embedding_functions import OpenAIEmbeddingFunction



chroma_client = chromadb.PersistentClient(path="./products.db")
EMBEDDING_MODEL = "text-embedding-3-small"
embedding_function = OpenAIEmbeddingFunction(api_key=os.getenv("OPENAI_API_KEY"), model_name=EMBEDDING_MODEL)



if os.getenv("OPENAI_API_KEY") is not None:
    openai.api_key = os.getenv("OPENAI_API_KEY")
    print ("OPENAI_API_KEY is ready")
else:
    print ("OPENAI_API_KEY environment variable not found")

def embed_data():
    # Load data from file
    with open("products.json", "r") as f:
        data = json.load(f)
    
    id = 0

    # Embed data
    products_collection = chroma_client.create_collection(name="products", embedding_function=embedding_function)

    # products_collection = chroma_client.get_collection(name="products", embedding_function=embedding_function)

    for item in data:
        # Store data in chromaDB
        # describe the prodoct in a paragraph and store in product info
        if item["url"].startswith("https://www.amazon.co.uk"):
            product_info = f"Product(Foot wear): {item['title']}, Brand: {item['brand']}, Price: {item['price']}, Breadcrumbs: {item['breadcrumbs']} product details: {item['product_details']}"
        else:
            # only use top 5 most important details in the details field like engine details, color, higlights, and labels use the exact field no objct should be passed
            product_info = f"Product(Car or Vehicle): {item['maker']} {item['model']}, Price: {item['price']}, Year: {item['year']}, Body Style: {item['body_style']}, Body Type: {item['body_type']}, Mileage: {item['mileage']}, Trim: {item['trim']}, Engine Cylinder count: {item['details']['basics']['engineCylinderCount']}, Engine Description: {item['details']['basics']['engineDescription']}, Engine Horsepower: {item['details']['basics']['engineHorsepower']}, Engine Torque: {item['details']['basics']['engineTorque']}"
            
            # # for each label add the label and the display name and the is valuable and is rare fields
            for facet in item["details"]["facets"]:
                product_info += f", Facet: {facet['facetName']}"
            for label in item["details"]["KBBData"]:
                for feature in label["feature"]:
                    product_info += f", Label: {label['label']}, Feature: {feature['displayName']}"
        embeddings = embedding_function(json.dumps(product_info))
        metadata = {"product": item["title"]} if item["url"].startswith("https://www.amazon.co.uk") else {"product": f"{item['maker']} {item['model']}"}
        products_collection.add(
            ids= [str(id + i) for i in range(len(embeddings))],
            embeddings=embeddings,
            metadatas=[metadata for _ in range(len(embeddings))],
            documents=[json.dumps(item)] * len(embeddings)
        )

        id += len(embeddings)



def query_embeddings(query):
    # Query data
    products_collection = chroma_client.get_collection(name="products")

    converted_query = embedding_function(query)
    

    results = products_collection.query(
        query_embeddings=converted_query,
        n_results=10,
    )

    documents = []

    for document in results["documents"][0]:
        documents.append(json.loads(document))

    print(documents)

    products = []
    [products.append(item) for item in documents if item not in products]

    return products



if __name__ == "__main__":
    embed_data()
